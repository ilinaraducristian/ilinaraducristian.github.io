(this.webpackJsonprandevous=this.webpackJsonprandevous||[]).push([[0],{109:function(e,n,t){},186:function(e,n,t){"use strict";t.r(n);var r,a=t(1),c=t.n(a),i=t(47),o=t.n(i),s=(t(109),function(e){e&&t.e(3).then(t.bind(null,194)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))}),d=t(6),l=t(90),u=t(2),f=t(26),v=Object(u.createSlice)({name:"keycloak",initialState:{authenticated:!1,token:"",subject:""},reducers:{authenticate:function(e,n){e.authenticated=!0,e.token=n.payload.token,e.subject=n.payload.subject},deauthenticate:function(e){e.authenticated=!1,e.token="",e.subject=""},updateToken:function(e,n){e.token=n.payload.token}}}),j=v.actions,b=j.authenticate,h=(j.deauthenticate,j.updateToken),p=function(e){return e.keycloak.authenticated},m=v.reducer,O=Object(u.createSlice)({name:"socketio",initialState:{connected:!1},reducers:{connect:function(e){e.connected=!0},disconnect:function(e){e.connected=!1}}}),x=O.actions,g=x.connect,y=(x.disconnect,function(e){return e.socketio.connected}),C=O.reducer,I=Object(u.createSlice)({name:"mediasoup",initialState:{loaded:!1},reducers:{load:function(e){e.loaded=!0}}}),k=(I.actions.load,I.reducer);!function(e){e.Text="text",e.Voice="voice"}(r||(r={}));var w=function(e){return e.servers.servers},_=function(e){var n,t=e.servers;return null===(n=t.servers.find((function(e){return e.id===t.selectedServer})))||void 0===n?void 0:n.groups},S=function(e){var n,t=e.servers;return null===(n=t.servers.find((function(e){return e.id===t.selectedServer})))||void 0===n?void 0:n.members},H=function(e){var n=e.servers,t=n.servers.find((function(e){return e.id===n.selectedServer})),a=null===t||void 0===t?void 0:t.channels.concat(null===t||void 0===t?void 0:t.groups.map((function(e){return e.channels})).flat()).find((function(e){return e.id===n.selectedChannel&&e.type===r.Text}));return null===a||void 0===a?void 0:a.messages},N=function(e){return e.servers.users},V=function(e){var n=e.servers;return null===n.selectedServer?void 0:n.servers.find((function(e){return e.id===n.selectedServer}))},L=function(e){var n=e.servers,t=n.servers.find((function(e){return e.id===n.selectedServer}));return null===t||void 0===t?void 0:t.channels.concat(null===t||void 0===t?void 0:t.groups.map((function(e){return e.channels})).flat()).find((function(e){return e.id===n.selectedChannel&&e.type===r.Text}))},M=function(e){return e.servers.backendInitialized},E=function(e){return e.servers.overlay},R=function(e){return e.servers.joinedVoiceChannel},P={initializeBackend:function(e,n){var t=n.payload,r=t.servers,a=t.users;e.servers=r,e.users=a,e.backendInitialized=!0},setInvitation:function(e,n){var t=e.servers.find((function(n){return n.id===e.selectedServer}));void 0!==t&&(t.invitation=n.payload)},closeOverlay:function(e){e.overlay=null},addChannelUsers:function(e,n){var t=n.payload,a=e.servers.map((function(e){return e.channels.concat(e.groups.map((function(e){return e.channels})).flat()).filter((function(e){return e.type===r.Voice}))})).flat();0!==a.length&&t.forEach((function(e){var n=a.find((function(n){return n.id===e.channelId}));if(void 0!==n){var t=n.users.findIndex((function(n){return n.userId===e.userId}));-1===t?n.users.push(e):n.users[t]=e}}))},selectServer:function(e,n){var t=n.payload;e.selectedChannel=null,e.selectedServer=t},selectChannel:function(e,n){var t=n.payload;e.selectedChannel=t},setOverlay:function(e,n){var t=n.payload;e.overlay=t},addServer:function(e,n){var t=n.payload,r=e.servers.findIndex((function(e){return e.id===t.id}));-1===r?e.servers.push(t):e.servers[r]=t},addMessages:function(e,n){var t=n.payload,a=e.servers.map((function(e){return e.channels.concat(e.groups.map((function(e){return e.channels})).flat()).filter((function(e){return e.type===r.Text}))})).flat();0!==a.length&&t.forEach((function(e){var n=a.find((function(n){return n.id===e.channelId}));if(void 0!==n){var t=n.messages.findIndex((function(n){return n.id===e.id}));-1===t?n.messages.push(e):n.messages[t]=e}}))},addUser:function(e,n){var t=n.payload,r=e.users.findIndex((function(e){return e.id===t.id}));-1===r?e.users.push(t):e.users[r]=t},addMember:function(e,n){var t,r=n.payload,a=null===(t=e.servers.find((function(e){return e.id===r.serverId})))||void 0===t?void 0:t.members;if(void 0!==a){var c=a.findIndex((function(e){return e.id===r.id}));-1===c?a.push(r):a[c]=r}},addChannel:function(e,n){var t=n.payload,r=e.servers.find((function(e){return e.id===t.serverId}));if(void 0!==r)if(null===t.groupId){var a=r.channels.findIndex((function(e){return e.id===t.id}));-1===a?r.channels.push(t):r.channels[a]=t}else{var c=r.groups.find((function(e){return e.id===t.groupId}));if(void 0===c)return;var i=c.channels.findIndex((function(e){return e.id===t.id}));-1===i?c.channels.push(t):c.channels[i]=t}},addGroup:function(e,n){var t=n.payload,r=e.servers.find((function(e){return e.id===t.serverId}));if(void 0!==r){var a=r.groups.findIndex((function(e){return e.id===t.id}));-1===a?r.groups.push(t):r.groups[a]=t}},editMessage:function(e,n){var t,a=n.payload,c=e.servers.find((function(e){return e.id===a.serverId}));if(void 0!==c){var i=null===(t=c.channels.concat(c.groups.map((function(e){return e.channels})).flat()).filter((function(e){return e.type===r.Text})).find((function(e){return e.id===a.channelId})))||void 0===t?void 0:t.messages.find((function(e){return e.id===a.messageId}));void 0!==i&&(i.text=a.text)}},deleteMessage:function(e,n){var t=n.payload,a=e.servers.find((function(e){return e.id===t.serverId}));if(void 0!==a){var c=a.channels.concat(a.groups.map((function(e){return e.channels})).flat()).filter((function(e){return e.type===r.Text})).find((function(e){return e.id===t.channelId}));if(void 0!==c){var i=c.messages.findIndex((function(e){return e.id===t.messageId}));-1!==i&&(c.messages.filter((function(e){return e.replyId===t.messageId})).forEach((function(e){return e.replyId=null})),c.messages.splice(i,1))}}},setChannelsOrder:function(e,n){var t=n.payload,r=V({servers:e});void 0!==r&&t.forEach((function(e){if(null===e.groupId){var n=r.channels.find((function(n){return n.id===e.id}));if(void 0===n)return;n.order=e.order}else{var t=r.groups.find((function(n){return n.id===e.groupId}));if(void 0===t)return;var a=t.channels.find((function(n){return n.id===e.id}));if(void 0===a)return;a.order=e.order}}))},joinVoiceChannel:function(e,n){var t=n.payload;e.joinedVoiceChannel=t},leaveVoiceChannel:function(e){e.joinedVoiceChannel=null}},T=Object(u.createSlice)({name:"servers",initialState:{backendInitialized:!1,servers:[],users:[],selectedServer:null,selectedChannel:null,joinedVoiceChannel:null,overlay:null},reducers:P}),D=T.actions,A=D.setChannelsOrder,Z=D.initializeBackend,z=D.setInvitation,q=(D.closeOverlay,D.addChannelUsers),U=D.joinVoiceChannel,F=(D.leaveVoiceChannel,D.selectServer),B=D.selectChannel,Q=D.setOverlay,G=D.addServer,J=D.addMessages,K=D.addMember,W=D.addChannel,X=D.deleteMessage,Y=D.editMessage,$=D.addGroup,ee=D.addUser,ne=T.reducer,te=t(93),re=t(7),ae=t.n(re),ce=t(19),ie=t(91),oe=t(103),se=t(102),de={offline:!1,backend:"http://rendezvous-api.zapto.org/",socketIoUrl:"http://rendezvous-api.zapto.org/",keycloak:{url:"http://rendezvous-iam.zapto.org/auth",realm:"capp",clientId:"auth-code"}},le=t(60),ue=new(t(92).Device),fe=(new MediaStream,new AudioContext,new Audio("/notification.ogg"));var ve=ue;function je(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return new Promise((function(n){if(0===t.length)return be.emit(e,0,n);be.emit.apply(be,[e].concat(t,[n]))}))}le.Socket;var be=Object(le.io)(de.socketIoUrl,{autoConnect:!1,transports:["websocket"]});Object.assign(be,{emitAck:je}),be.auth={},be.on("connect",Object(ce.a)(ae.a.mark((function e(){var n,t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.loaded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,be.emitAck("get_router_capabilities");case 4:return n=e.sent,t=n.routerRtpCapabilities,e.next=8,ve.load({routerRtpCapabilities:t});case 8:_e.dispatch(g());case 9:case"end":return e.stop()}}),e)})))),be.on("disconnect",(function(){window.location.reload()})),be.on("new_message",(function(e){_e.dispatch(J([e])),document.hidden&&(fe.currentTime=0,fe.play())})),be.on("new_member",(function(e){_e.dispatch(K(e))})),be.on("new_channel",(function(e){_e.dispatch(W(e))})),be.on("new_group",(function(e){_e.dispatch($(e))})),be.on("user_joined_voice-channel",(function(e){_e.dispatch(q([e]))})),be.on("message_edited",(function(e){_e.dispatch(Y(e))})),be.on("message_deleted",(function(e){_e.dispatch(X(e))}));var he=be,pe=Object(te.createApi)({reducerPath:"socketioApi",baseQuery:function(e){var n=e.ev,t=e.data;return he.emitAck(n,t).then((function(e){return{data:e}}))},endpoints:function(e){return{getUserData:e.query({query:function(){return{ev:"get_user_data"}}}),joinServer:e.query({query:function(e){return{ev:"join_server",data:{invitation:e}}}}),createServer:e.query({query:function(e){return{ev:"create_server",data:{name:e}}}}),createChannel:e.query({query:function(e){return{ev:"create_channel",data:e}}}),createGroup:e.query({query:function(e){return{ev:"create_group",data:e}}}),getMessages:e.query({query:function(e){return{ev:"get_messages",data:e}}}),createInvitation:e.query({query:function(e){return{ev:"create_invitation",data:{serverId:e}}},transformResponse:function(e){return e.invitation}}),editMessage:e.query({query:function(e){return{ev:"edit_message",data:e}}}),deleteMessage:e.query({query:function(e){return{ev:"delete_message",data:e}}})}}}),me=pe.useLazyGetUserDataQuery,Oe=pe.useLazyJoinServerQuery,xe=pe.useLazyCreateServerQuery,ge=pe.useLazyCreateChannelQuery,ye=pe.useLazyCreateGroupQuery,Ce=pe.useLazyGetMessagesQuery,Ie=pe.useLazyCreateInvitationQuery,ke=pe.useLazyEditMessageQuery,we=pe.useLazyDeleteMessageQuery,_e=Object(u.configureStore)({reducer:Object(l.a)({keycloak:m,socketio:C,mediasoup:k,servers:ne},pe.reducerPath,pe.reducer),middleware:function(e){return e().concat(pe.middleware)}}),Se=function(){return Object(f.useDispatch)()},He=f.useSelector,Ne=t(94),Ve=new(t.n(Ne).a)(de.keycloak);Ve.onAuthRefreshSuccess=function(){he.auth.token=Ve.token,_e.dispatch(h(Ve.token))},Ve.onAuthSuccess=function(){he.auth.token=Ve.token,he.connected||he.connect(),_e.dispatch(b(Ve.token))};var Le,Me,Ee=Ve,Re=new(t(95).LoremIpsum)({sentencesPerParagraph:{max:8,min:4},wordsPerSentence:{max:16,min:4}}),Pe=[{id:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",username:"user1",firstName:"Firstname",lastName:"Lastname"}],Te=[{id:1,name:"Server",userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",invitation:null,invitationExp:null,channels:[{id:1,serverId:1,groupId:null,type:r.Text,name:"channel 1",order:0,messages:new Array(100).fill(0).map((function(e,n){return{id:n+1,serverId:1,channelId:1,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",timestamp:(new Date).toString(),text:Re.generateParagraphs(1),isReply:!1,replyId:null}}))},{id:2,serverId:1,groupId:null,type:r.Text,name:"channel 2",order:1,messages:new Array(100).fill(0).map((function(e,n){return{id:n+100,serverId:1,channelId:2,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",timestamp:(new Date).toString(),text:Re.generateParagraphs(1),isReply:!1,replyId:null}}))},{id:3,serverId:1,groupId:null,type:r.Text,name:"channel 3",order:2,messages:new Array(100).fill(0).map((function(e,n){return{id:n+200,serverId:1,channelId:3,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",timestamp:(new Date).toString(),text:Re.generateParagraphs(1),isReply:!1,replyId:null}}))}],groups:[{id:1,serverId:1,name:"Text channels",channels:[{id:4,serverId:1,groupId:1,type:r.Text,name:"channel 4",order:0,messages:new Array(100).fill(0).map((function(e,n){return{id:n+300,serverId:1,channelId:4,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",timestamp:(new Date).toString(),text:Re.generateParagraphs(1),isReply:!1,replyId:null}}))},{id:5,serverId:1,groupId:1,type:r.Text,name:"channel 5",order:1,messages:new Array(100).fill(0).map((function(e,n){return{id:n+500,serverId:1,channelId:5,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",timestamp:(new Date).toString(),text:Re.generateParagraphs(1),isReply:!1,replyId:null}}))},{id:6,serverId:1,groupId:1,type:r.Text,name:"channel 6",order:2,messages:new Array(100).fill(0).map((function(e,n){return{id:n+600,serverId:1,channelId:6,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4",timestamp:(new Date).toString(),text:Re.generateParagraphs(1),isReply:!1,replyId:null}}))}]},{id:2,serverId:1,name:"Voice channels",channels:[{id:7,serverId:1,groupId:2,type:r.Voice,name:"channel 7",order:0,users:[]},{id:8,serverId:1,groupId:2,type:r.Voice,name:"channel 8",order:1,users:[]},{id:9,serverId:1,groupId:2,type:r.Voice,name:"channel 9",order:2,users:[]}]}],members:[{id:1,serverId:1,userId:"97a8ffc2-10cd-47dd-b915-cf8243d5bfc4"}]}],De=t(4),Ae=t(5),Ze=t(0);var ze,qe=Ae.a.li(Le||(Le=Object(De.a)(["\n  display: flex;\n  margin: 0.5em 0;\n"]))),Ue=Ae.a.button(Me||(Me=Object(De.a)(["\n  background-color: var(--color-secondary);\n  border: thin solid var(--color-secondary);\n  color: white;\n  font-size: 1.5rem;\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n"]))),Fe=function(e){var n=e.name,t=e.onSelectServer;return Object(Ze.jsx)(qe,{className:"li",children:Object(Ze.jsx)(Ue,{className:"btn",type:"button",onClick:t,children:n[0]})})};var Be,Qe=Ae.a.ol(ze||(ze=Object(De.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  background-color: var(--color-primary);\n  width: 4.5em;\n  overflow-y: auto;\n  flex-shrink: 0;\n"]))),Ge=function(){var e=Se(),n=He(w);return Object(Ze.jsxs)(Qe,{className:"list list__panel",children:[n.map((function(n){return Object(Ze.jsx)(Fe,{name:n.name,onSelectServer:function(){return function(n){e(F(n.id))}(n)}},"server_".concat(n.id))})),Object(Ze.jsx)(Fe,{name:"+",onSelectServer:function(){e(Q({type:"AddServerOverlayComponent"}))}})]})},Je=t(192),Ke="channel",We=Ae.a.div(Be||(Be=Object(De.a)(["\n\n  height: 0.5em;\n  background-color: ",";\n\n"])),(function(e){return e.Hidden?"transparent":"green"}));var Xe=function(e){var n=e.index,t=e.groupId,r=He(V),c=Object(a.useState)(!0),i=Object(d.a)(c,2),o=i[0],s=i[1],l=Se(),u=Object(a.useCallback)((function(e){if(t===e.groupId){if(void 0===r)return;if(null===t){if(e.order===n||e.order+1===n)return;var a=r.channels.filter((function(n){return n.id!==e.id})).map((function(e){return{id:e.id,order:e.order,groupId:null}}));e.order<n?(a.forEach((function(e){e.order>=n&&e.order++})),a.forEach((function(n){n.order>e.order&&n.order--}))):(a.forEach((function(n){n.order>e.order&&n.order--})),a.forEach((function(e){e.order>=n&&e.order++}))),a.push({id:e.id,order:n,groupId:t}),l(A(a))}else{var c=r.groups.find((function(e){return e.id===t}));if(void 0===c)return;var i=c.channels.filter((function(n){return n.id!==e.id})).map((function(e){return{id:e.id,order:e.order,groupId:t}}));e.order<n?(i.forEach((function(e){e.order>=n&&e.order++})),i.forEach((function(n){n.order>e.order&&n.order--}))):(i.forEach((function(n){n.order>e.order&&n.order--})),i.forEach((function(e){e.order>=n&&e.order++}))),i.push({id:e.id,order:n,groupId:t}),l(A(i))}}}),[t,n,l,r]),f=Object(a.useCallback)((function(){s(!1)}),[s]),v=Object(a.useCallback)((function(e){return{isOver:e.isOver()}}),[]),j=Object(Je.a)({accept:Ke,drop:u,hover:f,collect:v},[u,f,v]),b=Object(d.a)(j,2),h=b[0],p=b[1];return Object(a.useEffect)((function(){s(!h.isOver)}),[h]),Object(Ze.jsx)(We,{Hidden:o,ref:p})},Ye=t(193);var $e,en,nn=function(e){var n=e.type,t=e.isPrivate;return n===r.Text?t?Object(Ze.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(Ze.jsx)("path",{fill:"currentColor",d:"M14 8C14 7.44772 13.5523 7 13 7H9.76001L10.3657 3.58738C10.4201 3.28107 10.1845 3 9.87344 3H8.88907C8.64664 3 8.43914 3.17391 8.39677 3.41262L7.76001 7H4.18011C3.93722 7 3.72946 7.17456 3.68759 7.41381L3.51259 8.41381C3.45905 8.71977 3.69449 9 4.00511 9H7.41001L6.35001 15H2.77011C2.52722 15 2.31946 15.1746 2.27759 15.4138L2.10259 16.4138C2.04905 16.7198 2.28449 17 2.59511 17H6.00001L5.39427 20.4126C5.3399 20.7189 5.57547 21 5.88657 21H6.87094C7.11337 21 7.32088 20.8261 7.36325 20.5874L8.00001 17H14L13.3943 20.4126C13.3399 20.7189 13.5755 21 13.8866 21H14.8709C15.1134 21 15.3209 20.8261 15.3632 20.5874L16 17H19.5799C19.8228 17 20.0306 16.8254 20.0724 16.5862L20.2474 15.5862C20.301 15.2802 20.0655 15 19.7549 15H16.35L16.6758 13.1558C16.7823 12.5529 16.3186 12 15.7063 12C15.2286 12 14.8199 12.3429 14.7368 12.8133L14.3504 15H8.35045L9.41045 9H13C13.5523 9 14 8.55228 14 8Z"}),Object(Ze.jsx)("path",{fill:"currentColor",d:"M21.025 5V4C21.025 2.88 20.05 2 19 2C17.95 2 17 2.88 17 4V5C16.4477 5 16 5.44772 16 6V9C16 9.55228 16.4477 10 17 10H19H21C21.5523 10 22 9.55228 22 9V5.975C22 5.43652 21.5635 5 21.025 5ZM20 5H18V4C18 3.42857 18.4667 3 19 3C19.5333 3 20 3.42857 20 4V5Z"})]}):Object(Ze.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(Ze.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M5.88657 21C5.57547 21 5.3399 20.7189 5.39427 20.4126L6.00001 17H2.59511C2.28449 17 2.04905 16.7198 2.10259 16.4138L2.27759 15.4138C2.31946 15.1746 2.52722 15 2.77011 15H6.35001L7.41001 9H4.00511C3.69449 9 3.45905 8.71977 3.51259 8.41381L3.68759 7.41381C3.72946 7.17456 3.93722 7 4.18011 7H7.76001L8.39677 3.41262C8.43914 3.17391 8.64664 3 8.88907 3H9.87344C10.1845 3 10.4201 3.28107 10.3657 3.58738L9.76001 7H15.76L16.3968 3.41262C16.4391 3.17391 16.6466 3 16.8891 3H17.8734C18.1845 3 18.4201 3.28107 18.3657 3.58738L17.76 7H21.1649C21.4755 7 21.711 7.28023 21.6574 7.58619L21.4824 8.58619C21.4406 8.82544 21.2328 9 20.9899 9H17.41L16.35 15H19.7549C20.0655 15 20.301 15.2802 20.2474 15.5862L20.0724 16.5862C20.0306 16.8254 19.8228 17 19.5799 17H16L15.3632 20.5874C15.3209 20.8261 15.1134 21 14.8709 21H13.8866C13.5755 21 13.3399 20.7189 13.3943 20.4126L14 17H8.00001L7.36325 20.5874C7.32088 20.8261 7.11337 21 6.87094 21H5.88657ZM9.41045 9L8.35045 15H14.3504L15.4104 9H9.41045Z"})}):t?Object(Ze.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(Ze.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M15 12C15 12.0007 15 12.0013 15 12.002C15 12.553 14.551 13.002 14 13.002V15.002C15.654 15.002 17 13.657 17 12.002C17 12.0013 17 12.0007 17 12H15ZM19 12C19 12.0007 19 12.0013 19 12.002C19 14.759 16.757 17.002 14 17.002V19.002C17.86 19.002 21 15.863 21 12.002C21 12.0013 21 12.0007 21 12H19ZM10.293 3.29604C10.579 3.01004 11.009 2.92504 11.383 3.07904C11.757 3.23204 12 3.59904 12 4.00204V20.002C12 20.407 11.757 20.772 11.383 20.927C11.009 21.082 10.579 20.996 10.293 20.71L6 16.002H3C2.45 16.002 2 15.552 2 15.002V9.00204C2 8.45304 2.45 8.00204 3 8.00204H6L10.293 3.29604Z"}),Object(Ze.jsx)("path",{fill:"currentColor",d:"M21.025 5V4C21.025 2.88 20.05 2 19 2C17.95 2 17 2.88 17 4V5C16.4477 5 16 5.44772 16 6V9C16 9.55228 16.4477 10 17 10H19H21C21.5523 10 22 9.55228 22 9V5.975C22 5.43652 21.5635 5 21.025 5ZM20 5H18V4C18 3.42857 18.4667 3 19 3C19.5333 3 20 3.42857 20 4V5Z"})]}):Object(Ze.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(Ze.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M11.383 3.07904C11.009 2.92504 10.579 3.01004 10.293 3.29604L6 8.00204H3C2.45 8.00204 2 8.45304 2 9.00204V15.002C2 15.552 2.45 16.002 3 16.002H6L10.293 20.71C10.579 20.996 11.009 21.082 11.383 20.927C11.757 20.772 12 20.407 12 20.002V4.00204C12 3.59904 11.757 3.23204 11.383 3.07904ZM14 5.00195V7.00195C16.757 7.00195 19 9.24595 19 12.002C19 14.759 16.757 17.002 14 17.002V19.002C17.86 19.002 21 15.863 21 12.002C21 8.14295 17.86 5.00195 14 5.00195ZM14 9.00195C15.654 9.00195 17 10.349 17 12.002C17 13.657 15.654 15.002 14 15.002V13.002C14.551 13.002 15 12.553 15 12.002C15 11.451 14.551 11.002 14 11.002V9.00195Z"})})},tn=Ae.a.button($e||($e=Object(De.a)(["\n  display: flex;\n"])));var rn=Ae.a.ul(en||(en=Object(De.a)(["\n  color: white;\n"]))),an=function(e){var n=e.channel,t=He(N),r=Se(),c=Object(a.useRef)(!1),i=Object(a.useCallback)(Object(ce.a)(ae.a.mark((function e(){var n,t,r,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return n=e.sent,e.next=5,he.emitAck("create_transport",{type:"send"});case 5:return t=e.sent,r=t.transportParameters,(a=ve.createSendTransport(r)).on("connect",(function(e,n){var t=e.dtlsParameters;he.emit("connect_transport",{type:"send",dtlsParameters:t,id:a.id},n)})),a.on("produce",function(){var e=Object(ce.a)(ae.a.mark((function e(n,t){var r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.emitAck("create_producer",{id:a.id,kind:n.kind,rtpParameters:n.rtpParameters,appData:n.appData});case 2:r=e.sent,c=r.producerId,t({id:c});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),e.next=12,a.produce({track:null===n||void 0===n?void 0:n.getAudioTracks()[0]});case 12:case"end":return e.stop()}}),e)}))),[]),o=Object(a.useCallback)((function(){de.offline||c.current||(c.current=!0,r(U(n.id)))}),[c.current,n,i]),s=Object(Ye.a)({type:Ke,item:{id:n.id,order:n.order,groupId:n.groupId}},[n.order]),l=Object(d.a)(s,2)[1];return Object(Ze.jsxs)("li",{ref:l,children:[Object(Ze.jsxs)(tn,{className:"btn",type:"button",onClick:o,children:[Object(Ze.jsx)(nn,{type:n.type,isPrivate:!1}),Object(Ze.jsx)("span",{className:"span",children:n.name})]}),Object(Ze.jsx)(rn,{className:"list",children:n.users.map((function(e){return t.find((function(n){return n.id===e.userId}))})).filter((function(e){return void 0!==e})).map((function(e,t){return Object(Ze.jsx)("li",{className:"li",children:null===e||void 0===e?void 0:e.username},"channel_".concat(n.id,"_user").concat(t))}))})]})};var cn=function(e){var n=e.channel,t=Ce(),r=Object(d.a)(t,2),c=r[0],i=r[1],o=i.data,s=i.isSuccess,l=Se();Object(a.useEffect)((function(){s&&void 0!==o&&(l(J(o)),l(B(n.id)))}),[s]);var u=Object(a.useCallback)((function(){de.offline?l(B(n.id)):c({serverId:n.serverId,channelId:n.id,offset:0})}),[n.id,n.serverId]),f=Object(Ye.a)({type:Ke,item:{id:n.id,order:n.order,groupId:n.groupId}},[n.order]),v=Object(d.a)(f,2)[1];return Object(Ze.jsx)("li",{ref:v,children:Object(Ze.jsxs)(tn,{className:"btn",type:"button",onClick:u,children:[Object(Ze.jsx)(nn,{type:n.type,isPrivate:!1}),Object(Ze.jsx)("span",{className:"span",children:n.name})]})})};function on(e){return function(n,t){return[n.type===r.Text?Object(Ze.jsx)(cn,{channel:n},"channel_".concat(n.id)):Object(Ze.jsx)(an,{channel:n},"channel_".concat(n.id)),Object(Ze.jsx)(Xe,{index:t+1,groupId:e},"drop-handle_".concat(t+1))]}}var sn,dn,ln,un,fn=function(e){var n=e.groupId,t=void 0===n?null:n,r=He(function(e){return function(n){var t,r=n.servers;if(void 0!==r.selectedServer){var a=r.servers.find((function(e){return e.id===r.selectedServer}));return null===e?null===a||void 0===a?void 0:a.channels:null===a||void 0===a||null===(t=a.groups.find((function(n){return n.id===e})))||void 0===t?void 0:t.channels}}}(t));return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(Xe,{index:0,groupId:t},"drop-handle_0"),void 0===r||Array.from(r).sort((function(e,n){return e.order-n.order})).map(on(t)).flat(2)]})},vn=t(191),jn=t(101);var bn,hn,pn,mn,On=Ae.a.div(sn||(sn=Object(De.a)(["\n  padding: 1em;\n"]))),xn=Ae.a.ul(dn||(dn=Object(De.a)(["\n  background-color: var(--color-10th);\n  color: var(--color-11th);\n  border-radius: 0.5em;\n  border: solid var(--color-10th);\n  border-width: 0.5em;\n"]))),gn=Ae.a.li(ln||(ln=Object(De.a)(["\n  &:hover {\n    background-color: var(--color-12th);\n    color: white;\n  }\n"]))),yn=Ae.a.button(un||(un=Object(De.a)(["\n  color: currentColor;\n  width: 100%;\n  text-align: start;\n"]))),Cn=function(e){var n=e.setIsDropdownShown,t=He(V),r=Ie(),c=Object(d.a)(r,2),i=c[0],o=c[1].data,s=Se(),l=Object(a.useCallback)(Object(ce.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:i(t.id);case 3:case"end":return e.stop()}}),e)}))),[i,t]);Object(a.useEffect)((function(){void 0!==o&&(s(z(o)),s(Q({type:"InvitationOverlayComponent",payload:{invitation:o}})),n(!1))}),[o]);var u=Object(a.useCallback)(Object(ce.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!1),s(Q({type:"CreateChannelOverlayComponent",payload:{groupId:null}}));case 2:case"end":return e.stop()}}),e)}))),[n,s]),f=Object(a.useCallback)(Object(ce.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!1),s(Q({type:"CreateGroupOverlayComponent"}));case 2:case"end":return e.stop()}}),e)}))),[n,s]);return Object(Ze.jsx)(On,{children:Object(Ze.jsxs)(xn,{className:"list",children:[Object(Ze.jsx)(gn,{children:Object(Ze.jsx)(yn,{type:"button",className:"btn",onClick:l,children:"Invite people"})}),Object(Ze.jsx)(gn,{children:Object(Ze.jsx)(yn,{type:"button",className:"btn",onClick:u,children:"Create channel"})}),Object(Ze.jsx)(gn,{children:Object(Ze.jsx)(yn,{type:"button",className:"btn",onClick:f,children:"Create group"})})]})})},In=Ae.a.svg(bn||(bn=Object(De.a)(["\n  transition: transform .2s ease-out, -webkit-transform .2s ease-out;\n  transform: ",";\n"])),(function(e){return e.isCollapsed?"rotate(-90deg)":"none"}));function kn(e){var n=e.isCollapsed,t=void 0===n||n;return Object(Ze.jsx)(In,{isCollapsed:t,width:"24",height:"24",viewBox:"0 0 24 24",children:Object(Ze.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M16.59 8.59004L12 13.17L7.41 8.59004L6 10L12 16L18 10L16.59 8.59004Z"})})}function wn(e){var n=e.isCollapsed,t=void 0===n||n;return Object(Ze.jsx)(In,{isCollapsed:t,width:"18",height:"18",children:Object(Ze.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(Ze.jsx)("path",{d:"M0 0h18v18H0"}),Object(Ze.jsx)("path",{stroke:"currentColor",d:"M4.5 4.5l9 9",strokeLinecap:"round"}),Object(Ze.jsx)("path",{stroke:"currentColor",d:"M13.5 4.5l-9 9",strokeLinecap:"round"})]})})}var _n=Ae.a.button(hn||(hn=Object(De.a)(["\n  display: flex;\n  flex-grow: 1;\n  color: var(--color-9th)\n"]))),Sn=Ae.a.div(pn||(pn=Object(De.a)(["\n  display: flex;\n  /*flex-direction: column;*/\n  align-items: center;\n"]))),Hn=Ae.a.button(mn||(mn=Object(De.a)(["\n  font-size: 1.5em;\n"]))),Nn=function(e){var n=e.id,t=e.name,r=Object(a.useState)(!0),c=Object(d.a)(r,2),i=c[0],o=c[1],s=Se();return Object(Ze.jsxs)("li",{children:[Object(Ze.jsxs)(Sn,{children:[Object(Ze.jsxs)(_n,{className:"btn",type:"button",onClick:function(){return o(!i)},children:[Object(Ze.jsx)(kn,{isCollapsed:i}),Object(Ze.jsx)("span",{children:t})]}),Object(Ze.jsx)(Hn,{type:"button",className:"btn",onClick:function(){s(Q({type:"CreateChannelOverlayComponent",payload:{groupId:n}}))},children:"+"})]}),i||Object(Ze.jsx)("ol",{className:"list",children:Object(Ze.jsx)(fn,{groupId:n})})]})};var Vn,Ln,Mn,En=function(){var e=He(_);return Object(Ze.jsx)(Ze.Fragment,{children:null===e||void 0===e?void 0:e.map((function(e){return Object(Ze.jsx)(Nn,{id:e.id,name:e.name},"group_".concat(e.id))}))})};var Rn=Ae.a.div(Vn||(Vn=Object(De.a)(["\n  flex-shrink: 0;\n  background-color: var(--color-third);\n  width: 15em;\n"]))),Pn=Ae.a.span(Ln||(Ln=Object(De.a)(["\n  flex-grow: 1;\n"]))),Tn=Ae.a.button(Mn||(Mn=Object(De.a)(["\n  background: none;\n  font-size: 1.5em;\n  text-align: left;\n  width: 100%;\n\n  border-style: none;\n  box-shadow: var(--small-shadow-bar);\n  display: flex;\n  align-items: center;\n  height: 2em;\n  color: var(--color-9th)\n"]))),Dn=function(){var e=Object(a.useState)(!1),n=Object(d.a)(e,2),t=n[0],r=n[1],c=He(V);return Object(Ze.jsxs)(Rn,{children:[Object(Ze.jsx)(Tn,{className:"btn",type:"button",onClick:function(){r(!t)},children:void 0===c||Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(Pn,{children:c.name}),Object(Ze.jsx)(wn,{isCollapsed:!t})]})}),!t||Object(Ze.jsx)(Cn,{setIsDropdownShown:r}),Object(Ze.jsx)(vn.a,{backend:jn.a,children:Object(Ze.jsx)("ol",{className:"list",children:void 0===c||Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(fn,{}),Object(Ze.jsx)(En,{})]})})})]})};var An,Zn,zn,qn,Un,Fn,Bn,Qn=function(){return Object(Ze.jsxs)("svg",{x:"0",y:"0",className:"","aria-hidden":"false",width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(Ze.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M14 8.00598C14 10.211 12.206 12.006 10 12.006C7.795 12.006 6 10.211 6 8.00598C6 5.80098 7.794 4.00598 10 4.00598C12.206 4.00598 14 5.80098 14 8.00598ZM2 19.006C2 15.473 5.29 13.006 10 13.006C14.711 13.006 18 15.473 18 19.006V20.006H2V19.006Z"}),Object(Ze.jsx)("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M14 8.00598C14 10.211 12.206 12.006 10 12.006C7.795 12.006 6 10.211 6 8.00598C6 5.80098 7.794 4.00598 10 4.00598C12.206 4.00598 14 5.80098 14 8.00598ZM2 19.006C2 15.473 5.29 13.006 10 13.006C14.711 13.006 18 15.473 18 19.006V20.006H2V19.006Z"}),Object(Ze.jsx)("path",{fill:"currentColor",d:"M20.0001 20.006H22.0001V19.006C22.0001 16.4433 20.2697 14.4415 17.5213 13.5352C19.0621 14.9127 20.0001 16.8059 20.0001 19.006V20.006Z"}),Object(Ze.jsx)("path",{fill:"currentColor",d:"M14.8834 11.9077C16.6657 11.5044 18.0001 9.9077 18.0001 8.00598C18.0001 5.96916 16.4693 4.28218 14.4971 4.0367C15.4322 5.09511 16.0001 6.48524 16.0001 8.00598C16.0001 9.44888 15.4889 10.7742 14.6378 11.8102C14.7203 11.8418 14.8022 11.8743 14.8834 11.9077Z"})]})};var Gn=Ae.a.div(An||(An=Object(De.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),Jn=Ae.a.div(Zn||(Zn=Object(De.a)(["\n  position: relative;\n"]))),Kn=Ae.a.div(zn||(zn=Object(De.a)(["\n  position: absolute;\n  right: 1em;\n  background: blue;\n"]))),Wn=Ae.a.div(qn||(qn=Object(De.a)(["\n  display: flex;\n"]))),Xn=Ae.a.time(Un||(Un=Object(De.a)(["\n  margin: 0 1em;\n  flex-shrink: 0;\n"]))),Yn=Ae.a.span(Fn||(Fn=Object(De.a)(["\n  font-weight: 1000;\n  flex-shrink: 0;\n"]))),$n=Ae.a.span(Bn||(Bn=Object(De.a)(["\n  margin: 0 1em;\n"]))),et=function(e){var n=e.serverId,t=e.channelId,r=e.messageId,c=e.username,i=e.timestamp,o=e.text,s=e.isReply,l=e.replyId,u=e.reply,f=new Date(i),v=Object(a.useState)(!1),j=Object(d.a)(v,2),b=j[0],h=j[1],p=Se(),m=ke(),O=Object(d.a)(m,2),x=O[0],g=O[1],y=g.isFetching,C=g.isSuccess,I=we(),k=Object(d.a)(I,2),w=k[0],_=k[1],S=_.isFetching,H=_.isSuccess,N=Object(a.useState)(!1),V=Object(d.a)(N,2),L=V[0],M=V[1],E=Object(a.useRef)(null),R=Object(a.useState)(""),P=Object(d.a)(R,2),T=P[0],D=P[1];return Object(a.useEffect)((function(){var e;C&&!y&&(p(Y({serverId:n,channelId:t,messageId:r,text:null===(e=E.current)||void 0===e?void 0:e.innerText})),M(!1))}),[C,y]),Object(a.useEffect)((function(){S&&!H&&p(X({serverId:n,channelId:t,messageId:r}))}),[S,H]),Object(Ze.jsxs)(Jn,{onMouseEnter:function(){h(!0)},onMouseLeave:function(){h(!1)},children:[!b||Object(Ze.jsxs)(Kn,{children:[Object(Ze.jsx)("button",{type:"button",onClick:function(){if(L){if(null===E.current)return;E.current.innerText=T,M(!1)}else{if(null===E.current)return;D(E.current.innerText),M(!0)}},children:"E"}),Object(Ze.jsx)("button",{type:"button",onClick:function(){return u(r)},children:"R"}),Object(Ze.jsx)("button",{type:"button",onClick:function(){de.offline?p(X({serverId:n,channelId:t,messageId:r})):w({serverId:n,channelId:t,messageId:r})},children:"D"})]}),!s||Object(Ze.jsx)("div",{children:null===l?"message has been deleted":"replied to ".concat(l)}),Object(Ze.jsxs)(Wn,{children:[Object(Ze.jsxs)(Xn,{dateTime:f.toISOString(),children:[f.getHours()," : ",f.getMinutes()]}),Object(Ze.jsx)(Yn,{children:c}),Object(Ze.jsxs)(Gn,{children:[Object(Ze.jsx)($n,{suppressContentEditableWarning:!0,contentEditable:L,ref:E,children:o}),!L||Object(Ze.jsx)("button",{type:"button",onClick:function(){var e;de.offline||x({serverId:n,channelId:t,messageId:r,text:(null===(e=E.current)||void 0===e?void 0:e.innerText)||""})},children:"Save"})]})]})]})};var nt,tt=function(){return Object(Ze.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(Ze.jsx)("path",{fill:"currentColor",d:"M12 2.00098C6.486 2.00098 2 6.48698 2 12.001C2 17.515 6.486 22.001 12 22.001C17.514 22.001 22 17.515 22 12.001C22 6.48698 17.514 2.00098 12 2.00098ZM17 13.001H13V17.001H11V13.001H7V11.001H11V7.00098H13V11.001H17V13.001Z"})})};var rt=Ae.a.span(nt||(nt=Object(De.a)(["\n  background: none;\n  border: none;\n  flex-grow: 1;\n  word-wrap: anywhere;\n  max-height: inherit;\n  overflow-y: auto;\n  align-self: center;\n\n  &:focus {\n    outline: none;\n  }\n"]))),at=function(e){var n=e.onKeyDown,t=e.onKeyUp,r=e.onClick,c=Object(a.useCallback)((function(e){e.preventDefault();var n=getSelection(),t=e.clipboardData;null!==n&&null!==t&&t.setData("text/plain",n.toString())}),[]);return Object(Ze.jsx)(rt,{role:"textbox",contentEditable:!0,onKeyDown:n,onKeyUp:t,onCopy:c,onClick:r})};var ct=function(){return Object(Ze.jsx)("svg",{width:"24",height:"24","aria-hidden":"false",viewBox:"0 0 24 24",className:"svg__emoji",children:Object(Ze.jsx)("path",{fill:"currentColor",d:"M2 2C0.895431 2 0 2.89543 0 4V20C0 21.1046 0.89543 22 2 22H22C23.1046 22 24 21.1046 24 20V4C24 2.89543 23.1046 2 22 2H2ZM9.76445 11.448V15.48C8.90045 16.044 7.88045 16.356 6.74045 16.356C4.11245 16.356 2.66045 14.628 2.66045 12.072C2.66045 9.504 4.23245 7.764 6.78845 7.764C7.80845 7.764 8.66045 8.004 9.32045 8.376L9.04445 10.164C8.42045 9.768 7.68845 9.456 6.83645 9.456C5.40845 9.456 4.71245 10.512 4.71245 12.06C4.71245 13.62 5.43245 14.712 6.86045 14.712C7.31645 14.712 7.64045 14.616 7.97645 14.448V12.972H6.42845V11.448H9.76445ZM11.5481 7.92H13.6001V16.2H11.5481V7.92ZM20.4724 7.92V9.636H17.5564V11.328H19.8604V13.044H17.5564V16.2H15.5164V7.92H20.4724Z"})})},it=t(100),ot=new(t.n(it).a)([],{ignoreCase:!1,splitOnRegEx:!1,expandRegexes:[],min:3}),st=[{emoji:String.fromCodePoint(128512),shortcut:"grinning_face"},{emoji:String.fromCodePoint(128515),shortcut:"grinning_face_with_big_eyes"},{emoji:String.fromCodePoint(128516),shortcut:"grinning_face_with_smiling_eyes"},{emoji:String.fromCodePoint(128513),shortcut:"beaming_face_with_smiling_eyes"},{emoji:String.fromCodePoint(128518),shortcut:"grinning_squinting_face"},{emoji:String.fromCodePoint(128517),shortcut:"grinning_face_with_sweat"},{emoji:String.fromCodePoint(129315),shortcut:"rolling_on_the_floor_laughing"},{emoji:String.fromCodePoint(128514),shortcut:"face_with_tears_of_joy"},{emoji:String.fromCodePoint(128578),shortcut:"slightly_smiling_face"},{emoji:String.fromCodePoint(128579),shortcut:"upside-down_face"},{emoji:String.fromCodePoint(129760),shortcut:"melting_face"},{emoji:String.fromCodePoint(128521),shortcut:"winking_face"},{emoji:String.fromCodePoint(128522),shortcut:"smiling_face_with_smiling_eyes"},{emoji:String.fromCodePoint(128519),shortcut:"smiling_face_with_halo"}];st.forEach((function(e){ot.map(":".concat(e.shortcut),e.emoji)}));var dt,lt,ut,ft=ot,vt=Object(a.forwardRef)((function(e,n){var t=e.foundEmojis,r=Object(a.useState)(0),c=Object(d.a)(r,2),i=c[0],o=c[1];return Object(a.useImperativeHandle)(n,(function(){return{move:function(e){e?o(i-1===-1?t.length-1:i-1):i+1===t.length?o(0):o(i+1)},getEmoji:function(){return t[i]}}})),Object(Ze.jsx)(Ze.Fragment,{children:t.map((function(e,n){var t;return Object(Ze.jsxs)(jt,{highlighted:n===i,children:[Object(Ze.jsx)("div",{children:e}),Object(Ze.jsx)("div",{children:null===(t=st.find((function(n){return n.emoji===e})))||void 0===t?void 0:t.shortcut})]},"emoji_".concat(n))}))})})),jt=Ae.a.div(dt||(dt=Object(De.a)(["\n  display: flex;\n  align-content: space-between;\n\n  background-color: ",";\n"])),(function(e){return e.highlighted?"blue":"red"})),bt=vt;var ht,pt,mt,Ot=Ae.a.footer(lt||(lt=Object(De.a)(["\n  background-color: var(--color-fifth);\n  border-radius: 0.5em;\n  max-height: 12.5em;\n  margin: 0 1em 1.5em 1em;\n  display: flex;\n  align-items: flex-start;\n"]))),xt=Ae.a.div(ut||(ut=Object(De.a)(['\n  background-image: url("assets/emojis.png");\n  background-position: 0 0;\n  background-size: 242px 110px;\n  background-repeat: no-repeat;\n  width: 22px;\n  height: 22px;\n  transform: scale(1);\n  filter: grayscale(100%);\n\n  &:hover {\n    transform: scale(1.14);\n    filter: grayscale(0%);\n  }\n']))),gt=function(e){var n=e.isReplying,t=e.replyId,r=e.messageSent,c=Object(a.useRef)(null),i=Object(a.useState)(!1),o=Object(d.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)([]),f=Object(d.a)(u,2),v=f[0],j=f[1],b=He(L),h=Se();function p(){return(p=Object(ce.a)(ae.a.mark((function e(a){var c,i;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),void 0!==b){e.next=3;break}return e.abrupt("return");case 3:if(c=a.target.innerText,a.target.innerText="",i={channelId:b.id,message:c,isReply:!1,replyId:null},!n){e.next=11;break}if(void 0!==t){e.next=9;break}return e.abrupt("return");case 9:i.isReply=!0,i.replyId=t;case 11:return e.next=13,he.emitAck("send_message",i);case 13:c=e.sent,r(),h(J([c]));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){var n=getSelection();if(null!==n){var t=n.anchorOffset,r=e.target.innerText;if(void 0!==r){var a=r.lastIndexOf(":",t);if(-1!==a)return{selection:n,cursorPosition:t,message:r,lastIndexOfColon:a}}}}var O=Object(a.useCallback)((function(e){if(null!==c.current){if(["ArrowDown","ArrowUp"].includes(e.code))return e.preventDefault(),void c.current.move("ArrowUp"===e.code);if(e.code.includes("Enter")){if(!s)return function(e){return p.apply(this,arguments)}(e);e.preventDefault();var n=m(e);if(void 0!==n){var t=n.selection,r=n.cursorPosition,a=n.message,i=n.lastIndexOfColon;e.target.innerText="".concat(a.substring(0,i)).concat(c.current.getEmoji()).concat(a.substring(r+1)),t.setPosition(t.focusNode,1),j([]),l(!1)}}}}),[s]),x=Object(a.useCallback)((function(e){var n=function(e){var n=m(e);if(void 0!==n){var t=n.cursorPosition,r=n.message,a=n.lastIndexOfColon;if(-1===(r=r.substring(a,t)).indexOf(" ")&&160!==r.charCodeAt(r.length-1)){var c=ft.search(r);if(0!==c.length)return c}}}(e);if(void 0!==n)return l(!0),void j(n);l(!1),j([])}),[b,n]);return Object(Ze.jsxs)(Ze.Fragment,{children:[!s||Object(Ze.jsx)(bt,{ref:c,foundEmojis:v}),Object(Ze.jsxs)(Ot,{children:[Object(Ze.jsx)("button",{type:"button",className:"btn btn--off btn--hover btn__icon",children:Object(Ze.jsx)(tt,{})}),Object(Ze.jsx)(at,{onKeyDown:O,onKeyUp:x,onClick:x}),Object(Ze.jsx)("button",{type:"button",className:"btn btn--off btn--hover btn__icon",children:Object(Ze.jsx)(ct,{})}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__icon",children:Object(Ze.jsx)(xt,{})})]})]})};var yt=Ae.a.ol(ht||(ht=Object(De.a)(["\n  word-break: break-all;\n"]))),Ct=Ae.a.div(pt||(pt=Object(De.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n"]))),It=Ae.a.div(mt||(mt=Object(De.a)(["\n  flex-grow: 1;\n  overflow-x: hidden;\n"]))),kt=function(){var e=Object(a.useRef)(null),n=He(H),t=He(N),r=He(L),c=Ce(),i=Object(d.a)(c,2),o=i[0],s=i[1],l=s.data,u=s.isSuccess,f=s.status,v=Se(),j=Object(a.useState)(0),b=Object(d.a)(j,2),h=b[0],p=b[1],m=Object(a.useState)(!1),O=Object(d.a)(m,2),x=O[0],g=O[1],y=Object(a.useState)(!1),C=Object(d.a)(y,2),I=C[0],k=C[1],w=Object(a.useState)(),_=Object(d.a)(w,2),S=_[0],V=_[1];Object(a.useEffect)((function(){var n;null===(n=e.current)||void 0===n||n.scroll(0,e.current.scrollHeight)}),[n]),Object(a.useEffect)((function(){u&&"fulfilled"===f&&void 0!==r&&void 0!==l&&(0!==l.length?(v(J(l)),v(B(r.id))):g(!0))}),[f]);var M=Object(a.useCallback)((function(){var n;if(void 0!==r&&0===(null===(n=e.current)||void 0===n?void 0:n.scrollTop)){if(x)return;if(!de.offline)return o({serverId:r.serverId,channelId:r.id,offset:h}),void p(h+30)}}),[r,o,h,x]);function E(e){V(e),k(!0)}return Object(Ze.jsxs)(Ct,{children:[Object(Ze.jsx)(It,{ref:e,onScroll:M,children:Object(Ze.jsx)(yt,{className:"list",children:null===n||void 0===n?void 0:n.map((function(e){var n;return Object(Ze.jsx)(et,{serverId:e.serverId,channelId:e.channelId,messageId:e.id,username:(null===(n=t.find((function(n){return n.id===e.userId})))||void 0===n?void 0:n.username)||"",text:e.text,timestamp:e.timestamp,isReply:e.isReply,replyId:e.replyId,reply:E},"message_".concat(e.id))})).sort((function(e,n){return Date.parse(e.props.timestamp)-Date.parse(n.props.timestamp)}))})}),!I||Object(Ze.jsx)("div",{children:"replying"}),Object(Ze.jsx)(gt,{isReplying:I,replyId:S,messageSent:function(){V(void 0),k(!1)}})]})};var wt,_t=function(e){var n=e.name;return Object(Ze.jsx)("li",{children:n})};var St,Ht,Nt,Vt,Lt,Mt,Et=Ae.a.div(wt||(wt=Object(De.a)(["\n  width: var(--members-panel-width);\n  background-color: var(--color-third);\n  height: 100%;\n  flex-shrink: 0;\n"]))),Rt=function(){var e=He(N),n=He(S);return Object(Ze.jsx)(Et,{children:Object(Ze.jsx)("ol",{className:"list",children:null===n||void 0===n?void 0:n.map((function(n){var t;return Object(Ze.jsx)(_t,{name:(null===(t=e.find((function(e){return e.id===n.userId})))||void 0===t?void 0:t.firstName)||""},"member_".concat(n.id))}))})})};var Pt=Ae.a.span(St||(St=Object(De.a)(["\n  flex-grow: 1;\n"]))),Tt=Ae.a.div(Ht||(Ht=Object(De.a)(["\n  flex-grow: 1;\n  background-color: var(--color-secondary);\n  color: white;\n  display: flex;\n  flex-direction: column;\n"]))),Dt=Ae.a.div(Nt||(Nt=Object(De.a)(["\n  width: var(--members-panel-width);\n"]))),At=Ae.a.div(Vt||(Vt=Object(De.a)(["\n  display: flex;\n  flex-grow: 1;\n  max-height: calc(100% - 3em);\n"]))),Zt=Ae.a.header(Lt||(Lt=Object(De.a)(["\n  display: flex;\n  align-items: center;\n  height: 3em;\n  box-shadow: var(--small-shadow-bar);\n"]))),zt=Ae.a.div(Mt||(Mt=Object(De.a)(["\n  flex-grow: 1;\n  display: flex;\n"]))),qt=function(){var e=Object(a.useState)(!0),n=Object(d.a)(e,2),t=n[0],c=n[1],i=He(L);return Object(Ze.jsxs)(Tt,{children:[Object(Ze.jsxs)(Zt,{children:[Object(Ze.jsxs)(zt,{children:[void 0===i||Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(nn,{type:r.Text,isPrivate:!1}),Object(Ze.jsx)(Pt,{children:i.name})]}),Object(Ze.jsx)("button",{type:"button",className:"btn ".concat(t?"btn--active":"btn--off"," btn--hover"),onClick:function(){return c(!t)},children:Object(Ze.jsx)(Qn,{})})]}),Object(Ze.jsx)(Dt,{children:"placeholder"})]}),Object(Ze.jsxs)(At,{children:[Object(Ze.jsx)(kt,{}),!t||Object(Ze.jsx)(Rt,{})]})]})};var Ut=function(){var e=Se();return Object(Ze.jsx)("div",{className:"overlay",children:Object(Ze.jsxs)("div",{className:"overlay__container",children:[Object(Ze.jsx)("h1",{className:"h1",children:"Add a server"}),Object(Ze.jsxs)("div",{className:"overlay__body",children:[Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:function(){e(Q({type:"CreateServerOverlayComponent"}))},children:"Create a server"}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:function(){e(Q({type:"JoinServerOverlayComponent"}))},children:"Join a server"})]})]})})};var Ft=function(e){var n=e.groupId,t=void 0===n?null:n,c=Object(a.useRef)(null),i=He(V),o=ge(),s=Object(d.a)(o,2),l=s[0],u=s[1],f=u.data,v=u.isSuccess,j=Se();return Object(a.useEffect)((function(){var e;if(void 0!==i&&v&&void 0!==f){var n=null===(e=c.current)||void 0===e?void 0:e.value,a={id:null===f||void 0===f?void 0:f.channelId,serverId:i.id,groupId:t,type:r.Text,name:n,messages:[],order:0};j(W(a)),j(B(a.id)),j(Q(null))}}),[v]),Object(Ze.jsx)("div",{className:"overlay",children:Object(Ze.jsxs)("div",{className:"overlay__container",children:[Object(Ze.jsx)("h1",{className:"h1",children:"Channel name"}),Object(Ze.jsx)("input",{type:"text",ref:c}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:function(){var e;if(!de.offline&&void 0!==i){var n=null===(e=c.current)||void 0===e?void 0:e.value;l({serverId:i.id,groupId:t,channelName:n})}},children:"Create"})]})})};var Bt=function(){var e=Object(a.useRef)(null),n=He(V),t=ye(),r=Object(d.a)(t,2),c=r[0],i=r[1].data;return Object(a.useEffect)((function(){}),[i]),Object(Ze.jsx)("div",{className:"overlay",children:Object(Ze.jsxs)("div",{className:"overlay__container",children:[Object(Ze.jsx)("h1",{className:"h1",children:"Group name"}),Object(Ze.jsx)("input",{type:"text",ref:e}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:function(){var t;if(!de.offline&&void 0!==n){var r=null===(t=e.current)||void 0===t?void 0:t.value;c({serverId:n.id,groupName:r})}},children:"Create"})]})})};var Qt=function(){var e=Se(),n=Object(a.useRef)(null),t=xe(),r=Object(d.a)(t,2),c=r[0],i=r[1],o=i.data,s=i.isSuccess;return Object(a.useEffect)((function(){s&&void 0!==o&&(e(Q(null)),e(G(o.servers[0])),e(ee(o.users[0])))}),[s]),Object(Ze.jsx)("div",{className:"overlay",children:Object(Ze.jsxs)("div",{className:"overlay__container",children:[Object(Ze.jsx)("h1",{className:"h1",children:"Create a server"}),Object(Ze.jsxs)("div",{className:"overlay__body",children:[Object(Ze.jsx)("input",{type:"text",ref:n}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:function(){var e;c(null===(e=n.current)||void 0===e?void 0:e.value)},children:"Create"})]})]})})};var Gt=function(e){var n=e.invitation,t=Object(a.useState)("Copy"),r=Object(d.a)(t,2),c=r[0],i=r[1],o=Se(),s=Object(a.useCallback)(Object(ce.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(n);case 3:i("Copied"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),i("Error");case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),[n]);return Object(Ze.jsx)("div",{className:"overlay",children:Object(Ze.jsxs)("div",{className:"overlay__container",children:[Object(Ze.jsx)("button",{type:"button",onClick:function(){o(Q(null))},children:"X"}),Object(Ze.jsx)("h1",{className:"h1",children:"Share the invitation with a friend"}),Object(Ze.jsxs)("div",{className:"overlay__body",children:[Object(Ze.jsx)("span",{className:"span",children:n}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:s,children:c})]})]})})};var Jt=function(){var e=Object(a.useRef)(null),n=Oe(),t=Object(d.a)(n,2),r=t[0],c=t[1],i=c.data,o=c.isSuccess,s=Se();return Object(a.useEffect)((function(){o&&void 0!==i&&(s(G(i.servers[0])),s(ee(i.users[0])),s(Q(null)))}),[o]),Object(Ze.jsx)("div",{className:"overlay",children:Object(Ze.jsxs)("div",{className:"overlay__container",children:[Object(Ze.jsx)("h1",{className:"h1",children:"Join a server"}),Object(Ze.jsxs)("div",{className:"overlay__body",children:[Object(Ze.jsx)("input",{type:"text",ref:e}),Object(Ze.jsx)("button",{type:"button",className:"btn btn__overlay-select",onClick:function(){var n;r(null===(n=e.current)||void 0===n?void 0:n.value)},children:"Join"})]})]})})};function Kt(e){var n=e.type,t=e.payload;switch(n){case"AddServerOverlayComponent":return Object(Ze.jsx)(Ut,{});case"CreateChannelOverlayComponent":return Object(Ze.jsx)(Ft,{groupId:t.groupId});case"CreateGroupOverlayComponent":return Object(Ze.jsx)(Bt,{});case"CreateServerOverlayComponent":return Object(Ze.jsx)(Qt,{});case"InvitationOverlayComponent":return Object(Ze.jsx)(Gt,{invitation:t.invitation});case"JoinServerOverlayComponent":return Object(Ze.jsx)(Jt,{})}}var Wt=function(){var e=He(p),n=He(y),t=He(M),r=He(V),c=He(E),i=He(R),o=me(),s=Object(d.a)(o,2),l=s[0],u=s[1],f=u.data,v=u.isSuccess,j=u.status,b=Se();return Object(a.useEffect)((function(){var e;if(null!==i&&void 0!==r)if(null===i.groupId){if(void 0===r.channels.find((function(e){return e.id===i.channelId})))return}else if(void 0===(null===(e=r.groups.find((function(e){return e.id===i.groupId})))||void 0===e?void 0:e.channels.find((function(e){return e.id===i.channelId}))))return}),[i]),Object(a.useEffect)((function(){de.offline||e||Ee.init({onLoad:"check-sso",silentCheckSsoRedirectUri:window.location.origin+"/silent-check-sso.html"}).then((function(e){if(!e)return Ee.login()})).catch((function(){alert("failed to initialize")}))}),[e]),Object(a.useEffect)((function(){de.offline?b(Z({servers:Te,users:Pe})):n&&(t||l())}),[t,n]),Object(a.useEffect)((function(){v&&void 0!==f&&b(Z(f))}),[j]),Object(Ze.jsxs)(Ze.Fragment,{children:[null===c||Kt(c),Object(Ze.jsx)(Ge,{}),Object(Ze.jsx)(Dn,{}),Object(Ze.jsx)(qt,{})]})};o.a.render(Object(Ze.jsx)(c.a.StrictMode,{children:Object(Ze.jsx)(f.Provider,{store:_e,children:Object(Ze.jsx)(Wt,{})})}),document.getElementById("root")),s()}},[[186,1,2]]]);
//# sourceMappingURL=main.2fd5154d.chunk.js.map